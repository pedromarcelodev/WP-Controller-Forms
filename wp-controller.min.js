!function(a){a.fn.wpController=function(b){if(this.is("form")){var c={action:"",target:"",url:"",valid_fields:"",valid_fields_function:function(){},valid_fields_error:function(){},before:function(){},after:function(){}};void 0===b&&(b={}),a.wpControllerVars=a.extend({},c,b),this.submit(function(b){var c=a.wpControllerVars,d=a(this).serialize()+"&action="+c.action,e=a(this).find(c.valid_fields).filter(c.valid_fields_function);e.length?c.valid_fields_error():(0==c.url.length&&(c.url=a(this).attr("action")),a.post(c.url,d,function(b){c.before(b),a(c.target).html(b),c.after(b)})),b.preventDefault()})}return this}}(jQuery);