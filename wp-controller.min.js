!function(a){a.fn.wpController=function(b){if(this.is("form")){var c={action:"",target:"",url:"",before:function(){},after:function(){}};void 0===b&&(b={}),a.wpControllerVars=a.extend({},c,b),this.submit(function(b){var c=a(this).serialize()+"&action="+a.wpControllerVars.action;0==a.wpControllerVars.url.length&&(a.wpControllerVars.url=a(this).attr("action")),a.post(a.wpControllerVars.url,c,function(b){a.wpControllerVars.before(b),a(a.wpControllerVars.target).html(b),a.wpControllerVars.after(b)}),b.preventDefault()})}return this}}(jQuery);