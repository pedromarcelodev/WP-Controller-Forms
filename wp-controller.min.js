!function(a){a.fn.wpController=function(b){if(this.is("form")){var c={action:"",target:"",url:"",validFields:"",validFieldsFunction:function(i, e){},validFieldsError:function(){},beforePost:function(){},before:function(r){},after:function(r){}};void 0===b&&(b={}),void 0===a.wpControllerVars?(a.wpControllerVars={},a.wpControllerVars[this.attr("id")]=a.extend({},c,b)):a.wpControllerVars[this.attr("id")]=a.extend({},c,b),this.submit(function(b){var c=a.wpControllerVars[a(this).attr("id")],d=a(this).serialize()+"&action="+c.action,e=a(this).find(c.validFields).filter(c.validFieldsFunction);e.length?c.validFieldsError():(0==c.url.length&&(c.url=a(this).attr("action")),c.beforePost(),a.post(c.url,d,function(b){c.before(b),a(c.target).html(b),c.after(b)})),b.preventDefault()})}return this}}(jQuery);